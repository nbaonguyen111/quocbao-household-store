{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/app/admin/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { auth, db } from \"@/firebase/firebase\";\r\nimport Sidebar from \"@/components/sidebar\";\r\n\r\nexport default function AdminLayout({ children }) {\r\n  const router = useRouter();\r\n  const [authorized, setAuthorized] = useState(null); // null: loading, true: ok, false: bị chặn\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (!user) {\r\n        router.push(\"/dang-nhap\");\r\n        return;\r\n      }\r\n\r\n      const userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n      const userData = userDoc.data();\r\n\r\n      if (userData?.role === \"admin\") {\r\n        setAuthorized(true);\r\n      } else {\r\n        setAuthorized(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  // Đang kiểm tra quyền\r\n  if (authorized === null) {\r\n    return (\r\n      <div className=\"w-full h-screen flex items-center justify-center bg-gray-100 text-black\">\r\n        <p>Đang xác minh quyền truy cập...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Không phải admin\r\n  if (authorized === false) {\r\n    return (\r\n      <div className=\"w-full h-screen flex items-center justify-center bg-red-100 text-red-600 text-xl font-semibold\">\r\n        <p>Bạn không có quyền truy cập vào khu vực quản trị.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Là admin → render giao diện admin đầy đủ\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <Sidebar />\r\n      <main className=\"ml-64 w-full h-screen overflow-y-auto bg-gray-100 p-6\">\r\n        {children}\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AANA;;;;;;;;AAQe,SAAS,YAAY,EAAE,QAAQ,EAAE;IAC9C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,OAAO,0CAA0C;IAE9F,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc,CAAA,GAAA,wNAAA,CAAA,qBAAkB,AAAD,EAAE,2HAAA,CAAA,OAAI,EAAE,OAAO;YAClD,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,MAAM,UAAU,MAAM,CAAA,GAAA,iKAAA,CAAA,SAAM,AAAD,EAAE,CAAA,GAAA,iKAAA,CAAA,MAAG,AAAD,EAAE,2HAAA,CAAA,KAAE,EAAE,SAAS,KAAK,GAAG;YACtD,MAAM,WAAW,QAAQ,IAAI;YAE7B,IAAI,UAAU,SAAS,SAAS;gBAC9B,cAAc;YAChB,OAAO;gBACL,cAAc;YAChB;QACF;QAEA,OAAO,IAAM;IACf,GAAG;QAAC;KAAO;IAEX,sBAAsB;IACtB,IAAI,eAAe,MAAM;QACvB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,mBAAmB;IACnB,IAAI,eAAe,OAAO;QACxB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,2CAA2C;IAC3C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,6HAAA,CAAA,UAAO;;;;;0BACR,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT","debugId":null}}]
}