{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/app/admin/san-pham/page.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { db } from \"../../../firebase/firebase\";\r\nimport {\r\n    collection,\r\n    getDocs,\r\n    addDoc,\r\n    updateDoc,\r\n    deleteDoc,\r\n    doc,\r\n} from \"firebase/firestore\";\r\n\r\nexport default function ProductAdminPage() {\r\n    const [products, setProducts] = useState([]);\r\n    const [form, setForm] = useState({\r\n        name: \"\",\r\n        category: \"\",\r\n        price: \"\",\r\n        imageUrl: \"\",\r\n        description: \"\",\r\n    });\r\n    const [editId, setEditId] = useState(null);\r\n    const [message, setMessage] = useState(\"\"); \r\n\r\n    const fetchProducts = async () => {\r\n        const snap = await getDocs(collection(db, \"products\"));\r\n        setProducts(snap.docs.map((d) => ({ id: d.id, ...d.data() })));\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const handleChange = (e) => {\r\n        setForm({ ...form, [e.target.name]: e.target.value });\r\n    };\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (editId) {\r\n            await updateDoc(doc(db, \"products\", editId), {\r\n                ...form,\r\n                price: Number(form.price),\r\n            });\r\n            setMessage(\"Cập nhật thành công!\");\r\n        } else {\r\n            await addDoc(collection(db, \"products\"), {\r\n                ...form,\r\n                price: Number(form.price),\r\n            });\r\n            setMessage(\"Thêm thành công!\");\r\n        }\r\n        setForm({\r\n            name: \"\",\r\n            category: \"\",\r\n            price: \"\",\r\n            imageUrl: \"\",\r\n            description: \"\",\r\n        });\r\n        setEditId(null);\r\n        fetchProducts();\r\n        setTimeout(() => setMessage(\"\"), 2000); \r\n    };\r\n    const handleEdit = (product) => {\r\n        setForm({\r\n            name: product.name || \"\",\r\n            category: product.category || \"\",\r\n            price: product.price ?? \"\",\r\n            imageUrl: product.imageUrl || \"\",\r\n            description: product.description || \"\",\r\n        });\r\n        setEditId(product.id);\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Bạn có chắc muốn xoá sản phẩm này?\")) {\r\n            await deleteDoc(doc(db, \"products\", id));\r\n            fetchProducts();\r\n            setMessage(\"Xoá thành công!\");\r\n            setTimeout(() => setMessage(\"\"), 2000);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"bg-blue-900 p-6 rounded shadow w-full h-full text-white\"   >\r\n            <h2 className=\"text-2xl font-bold mb-4\">Product List</h2>\r\n            {message && (\r\n                <div className=\"mb-4 px-4 py-2 bg-green-100 text-green-700 rounded border border-green-300 transition\">\r\n                    {message}\r\n                </div>\r\n            )}\r\n            <form onSubmit={handleSubmit} className=\"mb-6 flex gap-4 flex-wrap items-end\">\r\n                <input\r\n                    name=\"name\"\r\n                    placeholder=\"Product Name\"\r\n                    value={form.name}\r\n                    onChange={handleChange}\r\n                    className=\"border px-2 py-1 rounded\"\r\n                    required\r\n                />\r\n                <input\r\n                    name=\"category\"\r\n                    placeholder=\"Category\"\r\n                    value={form.category}\r\n                    onChange={handleChange}\r\n                    className=\"border px-2 py-1 rounded\"\r\n                    required\r\n                />\r\n                <input\r\n                    name=\"price\"\r\n                    placeholder=\"Price\"\r\n                    type=\"number\"\r\n                    value={form.price}\r\n                    onChange={handleChange}\r\n                    className=\"border px-2 py-1 rounded\"\r\n                    required\r\n                />\r\n                <input\r\n                    name=\"imageUrl\"\r\n                    placeholder=\"Image URL\"\r\n                    value={form.imageUrl}\r\n                    onChange={handleChange}\r\n                    className=\"border px-2 py-1 rounded\"\r\n                />\r\n                <input\r\n                    name=\"description\"\r\n                    placeholder=\"Description\"\r\n                    value={form.description}\r\n                    onChange={handleChange}\r\n                    className=\"border px-2 py-1 rounded w-60\"\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700\"\r\n                >\r\n                    {editId ? \"Update\" : \"Add\"}\r\n                </button>\r\n                {editId && (\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                            setEditId(null);\r\n                            setForm({\r\n                                name: \"\",\r\n                                category: \"\",\r\n                                price: \"\",\r\n                                imageUrl: \"\",\r\n                                description: \"\",\r\n                            });\r\n                        }}\r\n                        className=\"bg-gray-400 text-white px-4 py-1 rounded hover:bg-gray-500\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                )}\r\n            </form>\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full bg-blue-900 border rounded\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"border px-2 py-1\">#ID</th>\r\n                            <th className=\"border px-2 py-1\">Image</th>\r\n                            <th className=\"border px-2 py-1\">Product Name</th>\r\n                            <th className=\"border px-2 py-1\">Category</th>\r\n                            <th className=\"border px-2 py-1\">Price</th>\r\n                            <th className=\"border px-2 py-1\">Description</th>\r\n                            <th className=\"border px-2 py-1\">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {products.map((p, idx) => (\r\n                            <tr key={p.id}>\r\n                                <td className=\"border px-2 py-1 text-center\">{idx + 1}</td>\r\n                                <td className=\"border px-2 py-1 text-center\">\r\n                                    {p.imageUrl ? (\r\n                                        <img src={p.imageUrl} alt={p.name} className=\"h-10 mx-auto\" />\r\n                                    ) : (\r\n                                        <span className=\"text-gray-400\">No image</span>\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"border px-2 py-1\">{p.name}</td>\r\n                                <td className=\"border px-2 py-1\">{p.category}</td>\r\n                                <td className=\"border px-2 py-1\">{Number(p.price).toLocaleString()}₫</td>\r\n                                <td className=\"border px-2 py-1\">{p.description}</td>\r\n                                <td className=\"border px-2 py-1 flex gap-2 justify-center\">\r\n                                    <button\r\n                                        className=\"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600\"\r\n                                        onClick={() => handleEdit(p)}\r\n                                    >\r\n                                        Edit\r\n                                    </button>\r\n                                    <button\r\n                                        className=\"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600\"\r\n                                        onClick={() => handleDelete(p.id)}\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        {products.length === 0 && (\r\n                            <tr>\r\n                                <td colSpan={7} className=\"text-center py-4 text-gray-400\">\r\n                                    No products found.\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}