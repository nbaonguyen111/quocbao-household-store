{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/app/product/%5Bid%5D/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { db } from \"@/firebase/firebase\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\nexport default function ProductDetail() {\r\n  const { id } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [showAddressModal, setShowAddressModal] = useState(false);\r\n  const [address, setAddress] = useState(\"Phường Bình Chiểu, TP. Thủ Đức, Hồ Chí Minh\");\r\n  const [tempAddress, setTempAddress] = useState(address);\r\n  const [deliveryTime, setDeliveryTime] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    async function fetchProduct() {\r\n      const docRef = doc(db, \"products\", id);\r\n      const docSnap = await getDoc(docRef);\r\n      if (docSnap.exists()) {\r\n        setProduct({ id: docSnap.id, ...docSnap.data() });\r\n      }\r\n    }\r\n    if (id) fetchProduct();\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    // Cập nhật thời gian giao hàng thực tế\r\n    const now = new Date();\r\n    const start = new Date(now.getTime() + 2 * 60 * 60 * 1000); // +2h\r\n    const end = new Date(now.getTime() + 4 * 60 * 60 * 1000);   // +4h\r\n    const format = (d) => d.toLocaleTimeString(\"vi-VN\", { hour: \"2-digit\", minute: \"2-digit\" });\r\n    setDeliveryTime(`${format(start)} - ${format(end)} hôm nay (${now.getDate().toString().padStart(2, \"0\")}/${(now.getMonth() + 1).toString().padStart(2, \"0\")})`);\r\n  }, []);\r\n\r\n  if (!product) return <div>Đang tải...</div>;\r\n\r\n  return (\r\n    <div className=\"p-8 bg-gray-100 min-h-screen flex flex-col items-center\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">{product.name}</h2>\r\n      <div className=\"flex gap-8 items-start mb-8\">\r\n        <div>\r\n          <div className=\"border-2 border-blue-400 rounded-lg flex items-center justify-center w-80 h-80 mb-4 bg-white shadow\">\r\n            <img\r\n              src={`/images/${product.imageUrl}`}\r\n              alt={product.name}\r\n              className=\"max-w-full max-h-full object-contain\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white border-2 border-orange-400 rounded-lg p-4 w-80 flex flex-col gap-4 shadow\">\r\n          {/* Số lượng */}\r\n          <div>\r\n            <span className=\"font-semibold\">Số lượng:</span>\r\n            <div className=\"flex items-center mt-2\">\r\n              <button\r\n                className=\"border px-3 py-1 rounded-l text-lg\"\r\n                onClick={() => setQuantity(q => Math.max(1, q - 1))}\r\n              >-</button>\r\n              <span className=\"mx-4 font-semibold text-lg\">{quantity}</span>\r\n              <button\r\n                className=\"border px-3 py-1 rounded-r text-lg\"\r\n                onClick={() => setQuantity(q => q + 1)}\r\n              >+</button>\r\n            </div>\r\n          </div>\r\n          {/* Nút mua */}\r\n          <div className=\"flex gap-3\">\r\n            <button className=\"bg-orange-500 hover:bg-orange-600 text-white font-semibold px-3 py-2 rounded flex-1\">Thêm vào giỏ</button>\r\n            <button className=\"bg-orange-500 hover:bg-orange-600 text-white font-semibold px-3 py-2 rounded flex-1\">Mua ngay</button>\r\n          </div>\r\n          {/* Thông tin vận chuyển */}\r\n          <div className=\"bg-gray-50 rounded p-3 text-sm border\">\r\n            <div className=\"font-semibold mb-1\">Thông tin vận chuyển</div>\r\n            <div className=\"mb-1 flex items-center gap-2\">\r\n              Giao đến:{\" \"}\r\n              <span className=\"font-medium\">{address}</span>\r\n              <button\r\n                className=\"ml-2 px-2 py-1 border rounded text-xs text-blue-600 hover:bg-blue-50\"\r\n                onClick={() => {\r\n                  setTempAddress(address);\r\n                  setShowAddressModal(true);\r\n                }}\r\n              >\r\n                Thay đổi\r\n              </button>\r\n            </div>\r\n            <div className=\"mb-1\">\r\n              Giao hàng: <span className=\"text-green-600 font-semibold\">Miễn phí</span> - Nhận hàng:{\" \"}\r\n              <span className=\"font-medium\">{deliveryTime}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* Modal đổi địa chỉ */}\r\n        {showAddressModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white rounded-lg p-6 w-[400px] shadow-lg relative\">\r\n              <button\r\n                className=\"absolute top-2 right-3 text-gray-500 text-xl\"\r\n                onClick={() => setShowAddressModal(false)}\r\n              >×</button>\r\n              <h3 className=\"font-bold text-lg mb-2\">Chọn địa chỉ nhận hàng</h3>\r\n              <div className=\"mb-2 text-sm\">\r\n                Địa chỉ đang chọn: <span className=\"font-medium\">{address}</span>\r\n              </div>\r\n              <div className=\"mb-3\">\r\n                <label className=\"block text-sm mb-1\">Thay đổi địa chỉ khác</label>\r\n                <input\r\n                  className=\"border rounded px-2 py-1 w-full\"\r\n                  value={tempAddress}\r\n                  onChange={e => setTempAddress(e.target.value)}\r\n                  placeholder=\"Nhập địa chỉ mới...\"\r\n                />\r\n              </div>\r\n              <div className=\"flex justify-end gap-2\">\r\n                <button\r\n                  className=\"px-3 py-1 rounded border\"\r\n                  onClick={() => setShowAddressModal(false)}\r\n                >Huỷ</button>\r\n                <button\r\n                  className=\"px-3 py-1 rounded bg-blue-600 text-white\"\r\n                  onClick={() => {\r\n                    setAddress(tempAddress);\r\n                    setShowAddressModal(false);\r\n                  }}\r\n                >Xác nhận</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"bg-white p-6 rounded-lg shadow mt-2 w-[560px]\">\r\n        <h3 className=\"font-semibold text-lg mb-4 border-b pb-2\">Thông tin sản phẩm</h3>\r\n        <table className=\"w-full text-sm\">\r\n          <tbody>\r\n            <tr>\r\n              <td className=\"font-semibold py-2 pr-4 w-1/3\">Tên sản phẩm:</td>\r\n              <td className=\"py-2\">{product.name}</td>\r\n            </tr>\r\n            <tr>\r\n              <td className=\"font-semibold py-2 pr-4\">Danh mục:</td>\r\n              <td className=\"py-2\">{product.category}</td>\r\n            </tr>\r\n            <tr>\r\n              <td className=\"font-semibold py-2 pr-4\">Mô tả:</td>\r\n              <td className=\"py-2\">{product.description}</td>\r\n            </tr>\r\n            <tr>\r\n              <td className=\"font-semibold py-2 pr-4\">Giá sản phẩm:</td>\r\n              <td className=\"py-2 text-red-600 font-bold\">{product.price?.toLocaleString()}₫</td>\r\n            </tr>\r\n            <tr>\r\n              <td className=\"font-semibold py-2 pr-4\">Nổi bật:</td>\r\n              <td className=\"py-2\">{product.featured ? \"Có\" : \"Không\"}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}