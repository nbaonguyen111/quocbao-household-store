{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/firebase/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\nimport {getAuth} from \"firebase/auth\"\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAyFjagBa8N0zUvqBFMC4nt1NtXKbGVezM\",\r\n  authDomain: \"household-store-d5cb9.firebaseapp.com\",\r\n  projectId: \"household-store-d5cb9\",\r\n  storageBucket: \"household-store-d5cb9.firebasestorage.app\",\r\n  messagingSenderId: \"775179695282\",\r\n  appId: \"1:775179695282:web:54028eeb3a20fa441cc5ab\",\r\n  measurementId: \"G-SLB6P205DL\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\nexport {db,auth};"],"names":[],"mappings":"AAAA,uDAAuD;;;;;AACvD;AAAA;AACA;AAAA;AACA;AAAA;;;;AACA,4DAA4D;AAC5D,iEAAiE;AAEjE,wCAAwC;AACxC,mEAAmE;AACnE,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,uLAAA,CAAA,gBAAa,AAAD,EAAE;AAC1B,MAAM,KAAK,CAAA,GAAA,sKAAA,CAAA,eAAY,AAAD,EAAE;AACxB,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/components/sidebar.jsx"],"sourcesContent":["\"use client\";\r\nimport { Home, User, Settings, ShoppingCart, Package, Users, BarChart3, Star, Cog } from 'lucide-react';\r\nimport { signOut } from \"firebase/auth\";\r\nimport { auth } from '@/firebase/firebase';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAdmin } from '@/app/admin/layout';\r\n\r\nconst Sidebar = () => {\r\n  const router = useRouter();\r\n  const { currentUser, permissions } = useAdmin();\r\n\r\n  const handleLogout = async () => {\r\n    await signOut(auth);\r\n    router.push(\"/dang-nhap\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-screen w-64 bg-gray-800 fixed flex flex-col\">\r\n      <div className=\"text-2xl font-bold p-4 border-b border-gray-700 text-white\">Admin Panel</div>\r\n      <div className=\"p-4 border-b border-gray-700\">\r\n        <div className=\"text-white text-sm\">\r\n          <div className=\"font-semibold\">{currentUser?.name || 'Admin'}</div>\r\n          <div className=\"text-gray-300 text-xs\">\r\n            {currentUser?.role === 'superadmin' ? 'Super Admin' :\r\n              currentUser?.role === 'admin' ? 'Admin' : 'Moderator'}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <nav className=\"flex-1 p-4\">\r\n        <ul className=\"space-y-2\">\r\n          <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n            <Home size={20} />\r\n            <a href=\"/admin\">Dashboard</a>\r\n          </li>\r\n\r\n          {permissions.canManageUsers && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <Users size={20} />\r\n              <a href=\"/admin/khach-hang\">Khách Hàng</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageOrders && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <ShoppingCart size={20} />\r\n              <a href=\"/admin/don-hang\">Đơn Hàng</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageProducts && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <Package size={20} />\r\n              <a href=\"/admin/san-pham\">Sản phẩm</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageAdmins && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <User size={20} />\r\n              <a href=\"/admin/quan-tri-vien\">Quản lý Admin</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageCategories && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <Settings size={20} />\r\n              <a href=\"/admin/danh-muc\">Danh mục</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageReviews && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <Star size={20} />\r\n              <a href=\"/admin/danh-gia\">Đánh giá</a>\r\n            </li>\r\n          )}\r\n          {permissions.canViewReports && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <BarChart3 size={20} />\r\n              <a href=\"/admin/bao-cao\">Báo cáo</a>\r\n            </li>\r\n          )}\r\n          {permissions.canManageSettings && (\r\n            <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white\">\r\n              <Cog size={20} />\r\n              <a href=\"/admin/cai-dat\">Cài đặt</a>\r\n            </li>\r\n          )}\r\n          <li className=\"flex items-center space-x-2 hover:text-yellow-400 cursor-pointer text-white mt-8 pt-4 border-t border-gray-700\">\r\n            <Settings size={20} />\r\n            <button onClick={handleLogout}>Đăng Xuất</button>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":";;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;;;AALA;;;;;;AAOA,MAAM,UAAU;;IACd,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,WAAQ,AAAD;IAE5C,MAAM,eAAe;QACnB,MAAM,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE,8HAAA,CAAA,OAAI;QAClB,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BAA6D;;;;;;0BAC5E,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAiB,aAAa,QAAQ;;;;;;sCACrD,6LAAC;4BAAI,WAAU;sCACZ,aAAa,SAAS,eAAe,gBACpC,aAAa,SAAS,UAAU,UAAU;;;;;;;;;;;;;;;;;0BAKlD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;;sCACZ,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,sMAAA,CAAA,OAAI;oCAAC,MAAM;;;;;;8CACZ,6LAAC;oCAAE,MAAK;8CAAS;;;;;;;;;;;;wBAGlB,YAAY,cAAc,kBACzB,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,uMAAA,CAAA,QAAK;oCAAC,MAAM;;;;;;8CACb,6LAAC;oCAAE,MAAK;8CAAoB;;;;;;;;;;;;wBAG/B,YAAY,eAAe,kBAC1B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,yNAAA,CAAA,eAAY;oCAAC,MAAM;;;;;;8CACpB,6LAAC;oCAAE,MAAK;8CAAkB;;;;;;;;;;;;wBAG7B,YAAY,iBAAiB,kBAC5B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,2MAAA,CAAA,UAAO;oCAAC,MAAM;;;;;;8CACf,6LAAC;oCAAE,MAAK;8CAAkB;;;;;;;;;;;;wBAG7B,YAAY,eAAe,kBAC1B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,qMAAA,CAAA,OAAI;oCAAC,MAAM;;;;;;8CACZ,6LAAC;oCAAE,MAAK;8CAAuB;;;;;;;;;;;;wBAGlC,YAAY,mBAAmB,kBAC9B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,6MAAA,CAAA,WAAQ;oCAAC,MAAM;;;;;;8CAChB,6LAAC;oCAAE,MAAK;8CAAkB;;;;;;;;;;;;wBAG7B,YAAY,gBAAgB,kBAC3B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,qMAAA,CAAA,OAAI;oCAAC,MAAM;;;;;;8CACZ,6LAAC;oCAAE,MAAK;8CAAkB;;;;;;;;;;;;wBAG7B,YAAY,cAAc,kBACzB,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,qNAAA,CAAA,YAAS;oCAAC,MAAM;;;;;;8CACjB,6LAAC;oCAAE,MAAK;8CAAiB;;;;;;;;;;;;wBAG5B,YAAY,iBAAiB,kBAC5B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,mMAAA,CAAA,MAAG;oCAAC,MAAM;;;;;;8CACX,6LAAC;oCAAE,MAAK;8CAAiB;;;;;;;;;;;;sCAG7B,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC,6MAAA,CAAA,WAAQ;oCAAC,MAAM;;;;;;8CAChB,6LAAC;oCAAO,SAAS;8CAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM3C;GArFM;;QACW,qIAAA,CAAA,YAAS;QACa,iIAAA,CAAA,WAAQ;;;KAFzC;uCAuFS","debugId":null}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file:///D:/cmder/quocbao-household-store/tg-dienmay/src/app/admin/layout.jsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState, createContext, useContext } from \"react\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { auth, db } from \"@/firebase/firebase\";\r\nimport Sidebar from \"@/components/sidebar\";\r\n\r\nexport const AdminContext = createContext();\r\n\r\nexport const useAdmin = () => {\r\n  const context = useContext(AdminContext);\r\n  if (!context) {\r\n    throw new Error('useAdmin must be used within AdminLayout');\r\n  }\r\n  return context;\r\n};\r\n\r\nconst checkPermission = (userRole, requiredRole) => {\r\n  const roleHierarchy = {\r\n    'superadmin': 3,\r\n    'admin': 2,\r\n    'moderator': 1\r\n  };\r\n\r\n  return roleHierarchy[userRole] >= roleHierarchy[requiredRole];\r\n};\r\n\r\nexport default function AdminLayout({ children }) {\r\n  const router = useRouter();\r\n  const [authorized, setAuthorized] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [permissions, setPermissions] = useState({});\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\r\n      if (!user) {\r\n        router.push(\"/dang-nhap\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        let userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n        let userData = userDoc.data();\r\n        if (!userData) {\r\n          userDoc = await getDoc(doc(db, \"adminUsers\", user.uid));\r\n          userData = userDoc.data();\r\n        }\r\n\r\n        if (userData) {\r\n          const role = userData.role;\r\n          if (role === 'superadmin' || role === 'admin' || role === 'moderator') {\r\n            setCurrentUser({ ...userData, uid: user.uid });\r\n            const userPermissions = {\r\n              canManageProducts: checkPermission(role, 'moderator'),\r\n              canManageUsers: checkPermission(role, 'admin'),\r\n              canManageOrders: checkPermission(role, 'moderator'),\r\n              canManageAdmins: checkPermission(role, 'superadmin'),\r\n              canDeleteAdmins: checkPermission(role, 'superadmin'),\r\n              canEditAdmins: checkPermission(role, 'superadmin'),\r\n              canViewReports: checkPermission(role, 'moderator'),\r\n              canManageCategories: checkPermission(role, 'admin'),\r\n              canManageReviews: checkPermission(role, 'moderator'),\r\n              canManageSettings: checkPermission(role, 'superadmin'),\r\n              role: role\r\n            };\r\n\r\n            setPermissions(userPermissions);\r\n            setAuthorized(true);\r\n          } else {\r\n            setAuthorized(false);\r\n          }\r\n        } else {\r\n          setAuthorized(false);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error checking user permissions:\", error);\r\n        setAuthorized(false);\r\n      }\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [router]);\r\n\r\n  if (authorized === null) {\r\n    return (\r\n      <div className=\"w-full h-screen flex flex-col gap-2 items-center justify-center bg-gray-100 text-black\">\r\n        <div className=\"w-10 h-10 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\r\n        <p>Đang xác minh quyền truy cập...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (authorized === false) {\r\n    return (\r\n      <div className=\"w-full h-screen flex items-center justify-center bg-red-100 text-red-600 text-xl font-semibold\">\r\n        <div className=\"flex justify-center relative\">\r\n          <img src={\"/images/leuleu.jpg\"} alt=\"leuleu\" />\r\n        </div>\r\n        <div className=\"absolute \">\r\n          <h1 className=\"text-2xl font-extrabold text-red-600\">Bạn không có quyền truy cập trang này!!!</h1>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <AdminContext.Provider value={{ currentUser, permissions }}>\r\n      <div className=\"flex h-screen\">\r\n        <Sidebar />\r\n        <main className=\"ml-64 w-full h-screen overflow-y-auto bg-gray-100 p-6\">\r\n          {children}\r\n        </main>\r\n      </div>\r\n    </AdminContext.Provider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}